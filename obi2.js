function hacer(service,country){console.log(service);console.log(country);var obtenTzid=new Promise(function(resolve,reject){fetch("https://onlinesim.ru/api/getNum.php?apikey=C9zkn1LW4uKXy71-cKUVjb82-v5VxJK39-Q1pzusA5-nVPk96AW8h1J9J5&service="+service+"&country="+country).then(function(response){return response.json()}).then(function(data){if(data.response==1){console.log("Si obtuvo un servicio:");console.log(data);tzid=data.tzid;resolve(tzid)}else{console.log("No se obtuvo el servicio (tzid)...");
tzid=data.response;reject(Error(tzid))}})});obtenTzid.then(function(result){console.log("Estamos en el .then de la promesa del tzid...");console.log(tzid);var obtenNumero=new Promise(function(resolve,reject){fetch("http://onlinesim.ru/api/getState.php?apikey=C9zkn1LW4uKXy71-cKUVjb82-v5VxJK39-Q1pzusA5-nVPk96AW8h1J9J5&tzid="+tzid).then(function(response){return response.json()}).then(function(data){if(data[0].response=="TZ_NUM_WAIT"){console.log("Si obtuvo el n\u00famero:");console.log(data);numero=
data[0].number;resolve(numero);exito=1}else{console.log("No se obtuvo el n\u00famero...");numero=data.response;reject(Error(numero))}})});obtenNumero.then(function(result){console.log("El n\u00famero obtenido es:");console.log(numero)},function(err){console.log(err);console.log(numero)})},function(err){console.log(err);console.log(tzid)})}
function leer(tzid){var obtenMensaje=new Promise(function(resolve,reject){fetch("http://onlinesim.ru/api/getState.php?apikey=C9zkn1LW4uKXy71-cKUVjb82-v5VxJK39-Q1pzusA5-nVPk96AW8h1J9J5&tzid="+tzid).then(function(response){return response.json()}).then(function(data){if(data[0].response=="TZ_NUM_WAIT"){console.log("Si obtuvo el mensaje:");console.log(data);numero=data[0].number;resolve(mensaje);exito=1}else{console.log("A\u00fan no se obtuvo el mensaje...");numero=data.response;reject(Error(mensaje))}})});
obtenMensaje.then(function(result){console.log("El mensaje se obtuvo, codificarlo y presentarlo en la glass window.");console.log(mensaje)},function(err){console.log(err)})};
